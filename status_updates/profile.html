<!--This file is for lab 5/7-->
<!DOCTYPE html>

<html>

<head>
<title>Fecesbook</title>
<script>


function printMessage()
{
	//var MSG = document.getElementById("msg").value;
	var dateinfo = new Date();
	var month = 1 + dateinfo.getMonth();
	var day = dateinfo.getDate();
	var year = dateinfo.getUTCFullYear();
	var hour = dateinfo.getHours();
	var minutes = dateinfo.getMinutes();
	var name = document.getElementById("msg");
	var content = document.createTextNode(name.value);
	content.textContent = month+"/"+day+"/"+year+" "+hour+":"+minutes+" - "+content.textContent;
	localStorage[new Date().getTime()] = content.textContent;

	statDiv = document.getElementById("status");

	for(key in localStorage){
		var record = document.createTextNode(localStorage[key]);
		var newP = document.createElement("div");
		newP.appendChild(record);

		if(!statDiv.hasChildNodes()){
			statDiv.appendChild(newP);
		}

		else{
			var childone = statDiv.firstChild;
			statDiv.insertBefore(newP, childone);
		}
	}

	name.value="";
}

function init()
{
	statDiv = document.getElementById("status");
	console.log("getting into init");
	for(key in localStorage){
		var record = document.createTextNode(localStorage[key]);
		var newP = document.createElement("div");
		newP.appendChild(record);

		if(!statDiv.hasChildNodes()){
			statDiv.appendChild(newP);
		}

		else{
			var childone = statDiv.firstChild;
			statDiv.insertBefore(newP, childone);
		}
	}
}

</script>
</head>

<body onload="init()">
	<h1>Fecebook</h1>
	<div id="nav">
		<ul>
			<li id="home">Home</li>
			<li id="groups">Groups</li>
			<li id="profile">Profile</li>
			<li id="contacts">Contacts</li>
			<li id="inbox">Inbox</li>
			<li id="applications">Applications</li>
		</ul>
	</div>
	<h2 id="fullname">Barney Gumble</h2>
	<h3>What are you thinking about? <input type="text" id="msg" name="msg" size="30" onkeypress=" if(window.event.keyCode==13) printMessage();"/></h3>
	<h3>Updates</h3>
	<div id="status">
	</div>
	<div id="yesterday">
		<h3>Updates from yesterday:</h3>
		<ul>
			<li>Alice is now connected to Bob</li>
			<li>Tom recommends Jerry</li>
			<li>Harry just returned from a trip from Curaco</li>
		</ul>
	</div>
	<div id="longlongtimeago">
		<h3>Updates from long long time ago:</h3>
		<ul>
			<li>Harry just returned from a trip from Curaco</li>
			<li>Joan is now connected to Mary</li>
			<li>Steven is now connected to James</li>
		</ul>
	</div>
</body>
</html>